/**
 * jArcherTarget version 0.2
 *
 * Copyright 2012, Andre Meyering
 * Licensed under the MIT license.
 */var jat={};(function(e){var t={onTargetOver:"targetOver",onTargetOut:"targetOut",onTargetMove:"targetMove",onTargetClick:"targetClick",onArrowOver:"arrowOver",onArrowOut:"arrowOut",onArrowMove:"arrowMove",onArrowClick:"arrowClick",onArrowSelect:"arrowSelect",onArrowDeselect:"arrowDeselect",onZoom:"zoom",onTap:"tap"},n={get:{ring:1,targetParams:1},set:{backgroundColor:1,zoom:1,arrowActive:1,arrowStyle:1,arrowOptions:1}};e.fn.archerTarget=function(r){var i={target:"wa_x",targetDefaults:{center:[50,50],diameter:90,style:{initial:{opacity:1},hover:{opacity:1},arrowOn:{opacity:1},arrowOff:{opacity:.9}}},backgroundColor:"transparent",draggable:1,arrowDefaults:{active:1,draggable:1,radius:5,style:{initial:{opacity:.9,color:"#00ff00",stroke:!1},hover:{opacity:1},selected:{opacity:1}},target:0},zoom:1,maxZoom:6,minZoom:.6,zoomStep:.2,touch:!1},s,o,u,a;if(r==="addTarget")jat.Target.targets[arguments[1]]=arguments[2];else{if(!(r!=="set"&&r!=="get"||!n[r][arguments[1]]))return o=r+arguments[1].charAt(0).toUpperCase()+arguments[1].substr(1),this.data("targetObject")[o].apply(this.data("targetObject"),Array.prototype.slice.call(arguments,2));e.extend(!0,i,r);for(a in i.targetDefaults.style)i.targetDefaults.style.hasOwnProperty(a)&&(i.targetDefaults.style[a]=e.extend(!0,{},i.targetDefaults.style.initial,i.targetDefaults.style[a]));for(a in i.arrowDefaults.style)i.arrowDefaults.style.hasOwnProperty(a)&&(i.arrowDefaults.style[a]=e.extend(!0,{},i.arrowDefaults.style.initial,i.arrowDefaults.style[a]));i.container=this,s=new jat.Target(i),this.data("targetObject",s);for(u in t)t.hasOwnProperty(u)&&i[u]&&this.on(t[u]+".jArcherTarget",i[u])}},jat.Target=function(t){var n=this;t=t||{},this.params=t,this.container=t.container.addClass("archerTargetContainer").css({position:"relative",overflow:"hidden"}),this.arrowClass="arrow",this.zoom=t.zoom,this.maxZoom=t.maxZoom,this.minZoom=t.minZoom,this.zoomStep=t.zoomStep,this.draggable=t.draggable,this.arrowDrag=!1,this.setSize(),this.convertTo={pc:{x:function(e,t){return t||(t=0),(e/n.zoom-n.gap[t].left-n.transX)/n.convertTo.canvas.x(n.target[t].diameter)*100},y:function(e,t){return t||(t=0),(e/n.zoom-n.gap[t].top-n.transY)/n.convertTo.canvas.x(n.target[t].diameter)*100}},px:{x:function(e,t){return t||(t=0),(n.convertTo.canvas.x(n.target[t].diameter)/100*e+n.gap[t].left+n.transX)*n.zoom},y:function(e,t){return t||(t=0),(n.convertTo.canvas.x(n.target[t].diameter)/100*e+n.gap[t].top+n.transY)*n.zoom}},canvas:{x:function(e,t){return t||(t=100),n.width/100*t/100*e},y:function(e,t){return t||(t=100),n.height/100*t/100*e}}},this.setBackgroundColor(t.backgroundColor),this.canvas=new jat.VectorCanvas(this.width,this.height),this.container.append(this.canvas.canvas),this.rootGroup=this.canvas.createGroup(!0,{id:this.container.attr("id")+"TargetContainer"}),this.canvas.canvas.appendChild(this.rootGroup),this.target=t.target instanceof Array?t.target:[{name:t.target}],this.target=this.createTarget(this.target),this.setGap(),this.arrow=this.createArrows(t.arrows),this.bindArrowEvents(t.touch),this.bindContainerEvents(t.touch),this.bindTargetEvents(t.touch),e("<div/>").addClass("archerTarget-zoomin").text("+").appendTo(t.container),e("<div/>").addClass("archerTarget-zoomout").html("&#x2212;").appendTo(t.container),this.bindZoomEvents(t.touch),this.applyTransform()},jat.Target.targets={}})(jQuery),jat.Target.prototype.transX=0,jat.Target.prototype.transY=0,jat.Target.prototype.applyTransform=function(){this.canvas.applyTransformParams(this.zoom,this.transX,this.transY),this.setArrowPosition()},jat.Target.prototype.bindArrowEvents=function(e){var t=this,n,r=!1,i,s,o,u,a,f,l,c,h,p,d,v=0;this.container.on("mousemove",function(e){return r&&f.draggable&&(p=e.pageX-this.offsetLeft,d=e.pageY-this.offsetTop,o.setPosition({x:p,y:d}),f.draggable instanceof Object&&t.setArrowDrag({x:p,y:d,drag:f.draggable,arrowRadius:f.radius}),c=t.calculateRing({x:p,y:d-v,target:u.target}),u.x=t.convertTo.pc.x(p,u.target),u.y=t.convertTo.pc.y(d-v,u.target),u.ring=c,t.checkOnTarget(u,{x:p,y:d})&&(h=t.checkClosestTarget(u.target,{x:p,y:d}),u.target!==h&&(u.target=h,t.setTargetStyle("arrow",{active:u.target}))),i=e.pageX,s=e.pageY,t.arrow[l]=f,t.arrow[l].data[a]=u,$(o).trigger("arrowMove.jArcherTarget",[l,a,t.arrow])),!1}),$("#"+this.container.attr("id")+" .arrowSetCanvas").on("mousedown mouseover","circle",function(e){r||(o=this,l=parseInt(o.parentNode.id.substr(o.parentNode.id.indexOf("_")+1),10),f=t.arrow[l],a=parseInt($(this).attr("class").substr(0,$(this).attr("class").indexOf(" ")),10),u=f.data[a]);if(e.type==="mousedown"){var n=e.pageX,c=e.pageY;r=t.arrowDrag=!0,t.setTargetStyle("arrow",{active:u.target}),$(t.container).css({cursor:"move"}),o.setAttribute("fill",f.style.selected.color),$(o).css({opacity:f.style.selected.opacity}).trigger("arrowSelect.jArcherTarget",[l,a]),f.draggable instanceof Object?(t.createArrowPointer({x:t.convertTo.px.x(u.x,u.target),y:t.convertTo.px.y(u.y,u.target),drag:f.draggable,color:f.style.selected.color,arrowRadius:f.radius}),v=f.draggable.height+f.radius):v=0,i=e.pageX,s=e.pageY}else e.type==="mouseover"&&(r||(o.setAttribute("fill",f.style.hover.color),$(o).css({opacity:f.style.hover.opacity}).trigger("arrowOver.jArcherTarget",[l,a])));return!1}).on("mouseup mouseout","circle",function(e){return e.type==="mouseup"?(t.setTargetStyle("initial"),o.setAttribute("fill",f.style.hover.color),f.draggable instanceof Object&&(t.removeArrowPointer(),o.setPosition({x:t.convertTo.px.x(u.x,u.target),y:t.convertTo.px.y(u.y,u.target)})),$(t.container).css({cursor:"default"}).trigger("arrowClick.jArcherTarget",[l,a]).trigger("arrowDeselect.jArcherTarget",[l,a]),r=t.arrowDrag=!1):e.type==="mouseout"&&(!r||!f.draggable)&&(o.setAttribute("fill",f.style.initial.color),$(o).css({opacity:f.style.initial.opacity}).trigger("arrowOut.jArcherTarget",[l,a]),r=t.arrowDrag=o=l=f=a=u=!1),!1})},jat.Target.prototype.bindContainerEvents=function(e){var t=this,n=!1,r,i,s=!1;!e&&this.draggable&&this.container.on("mousemove","svg, .targetCanvas",function(e){n&&(t.transX-=(r-e.pageX)/t.zoom,t.transY-=(i-e.pageY)/t.zoom,s=!0,t.applyTransform(),r=e.pageX,i=e.pageY,t.container.trigger("targetMove.jArcherTarget",[]))}).on("mousedown","svg, .targetCanvas",function(e){n=!0,r=e.pageX,i=e.pageY,s=!1,$(this).css({cursor:"move"})}).on("mouseup","svg, .targetCanvas",function(e){n=!1,$(this).css({cursor:"default"})}),console.log("sss"),this.container.on("click",function(e){if(!s&&!$(e.target).hasClass("archerTarget-zoomin")&&!$(e.target).hasClass("archerTarget-zoomout")){var n=e.pageX-this.offsetLeft,r=e.pageY-this.offsetTop,i=t.checkClosestTarget(0,{x:n,y:r});console.log(i,t.convertTo.pc.x(n,i),t.convertTo.pc.y(r,i)),t.container.trigger("containerTap.jArcherTarget",[{x:t.convertTo.pc.x(n,i),y:t.convertTo.pc.y(r,i)}])}})},jat.Target.prototype.bindTargetEvents=function(e){var t=this;$(this.target).each(function(e,n){$(this.element).on("mouseover",function(r){return t.arrowDrag||$(n.element).css({opacity:n.style.hover.opacity}).trigger("targetOver.jArcherTarget",[e]),!1}).on("mouseout",function(r){return t.arrowDrag||$(n.element).css({opacity:n.style.initial.opacity}).trigger("targetOut.jArcherTarget",[e]),!1}).on("click",function(t){$(n.element).trigger("targetClick.jArcherTarget",[e])})})},jat.Target.prototype.bindZoomEvents=function(){var e=this,t=0;this.container.on("click",".archerTarget-zoomin",function(){e.zoom<=e.maxZoom&&(t=e.zoom+e.zoomStep),e.setZoom(t)}).on("click",".archerTarget-zoomout",function(){e.zoom>=e.minZoom+e.zoomStep&&(t=e.zoom-e.zoomStep),e.setZoom(t)})},jat.Target.prototype.checkClosestTarget=function(e,t){var n,r,i,s;for(n=0;n<this.target.length;n++){r=(this.convertTo.canvas.x(this.target[n].center[0])+this.transX)*this.zoom,i=(this.convertTo.canvas.y(this.target[n].center[1])+this.transY)*this.zoom,s=this.convertTo.canvas.x(this.target[n].diameter)/2*this.zoom,console.log(n,"  "+r+": "+this.convertTo.canvas.x(this.target[n].center[0])+" - "+this.transX+"; "+t.x+" Radius"+s),t.x>r-s&&t.x<r+s&&console.log("X true"),t.y>i-s&&t.y<i+s&&console.log("Y true");if(t.x>r-s&&t.x<r+s&&t.y>i-s&&t.y<i+s)return n}return e},jat.Target.prototype.checkOnTarget=function(e,t){return this.target.length>=1?!0:e.x>100+t.tolerance||e.y>100+t.tolerance||e.x<-t.tolerance||e.y<-t.tolerance?!1:!0},jat.Target.prototype.createArrowPointer=function(e){this.dragMark={},this.dragMark.element=this.canvas.createGroup(!1,{id:$(this.container).attr("id")+"ArrowDrag"}),this.dragMark.rect=this.canvas.createRect({x:e.x-e.drag.width/2,y:e.y-e.drag.height-e.arrowRadius,width:e.drag.width,height:e.drag.height,fill:e.color}),this.dragMark.element.appendChild(this.dragMark.rect),this.dragMark.circle=this.canvas.createCircle({x:e.x,y:e.y-e.drag.height-e.arrowRadius,radius:e.drag.width,fill:e.color,stroke:!1,eleClass:!1}),this.dragMark.element.appendChild(this.dragMark.circle),this.canvas.canvas.appendChild(this.dragMark.element)},jat.Target.prototype.createArrows=function(e){var t,n,r,i,s={height:40,width:5};e=e||[],this.arrowGroup=this.canvas.createGroup(!1,{id:this.container.attr("id")+"ArrowContainer"}),this.canvas.canvas.appendChild(this.arrowGroup);for(t=0;t<e.length;t++){e[t]=e[t]instanceof Array?{data:e[t]}:e[t],e[t]=$.extend(!0,{},this.params.arrowDefaults,e[t]),e[t].draggable instanceof Object&&(e[t].draggable=$.extend(!0,{},s,e[t].draggable)),i=e[t].active?"":"hidden",e[t].element=this.canvas.createGroup(!1,{id:$(this.container).attr("id")+"ArrowSet_"+t,eleClass:"arrowSetCanvas "+i});for(n=0;n<e[t].data.length;n++)this.target[e[t].target]||(e[t].target=0),e[t].data[n].target=e[t].data[n].target?e[t].data[n].target:e[t].target,this.target[e[t].data[n].target]||(e[t].data[n].target=0),typeof e[t].data[n].active=="undefined"&&(e[t].data[n].active=1),r=e[t].data[n].active?"":"hidden",e[t].data[n].element=this.canvas.createCircle({x:this.convertTo.px.x(e[t].data[n].x,e[t].data[n].target),y:this.convertTo.px.y(e[t].data[n].y,e[t].data[n].target),radius:e[t].radius,fill:e[t].style.initial.color,stroke:e[t].style.initial.stroke,eleClass:n+" "+r}),$(e[t].data[n].element).css({opacity:e[t].style.initial.opacity}),$(e[t].element).append(e[t].data[n].element);this.arrowGroup.appendChild(e[t].element)}return e},jat.Target.prototype.createTarget=function(e){var t,n,r=this;e=e||[];for(t=0;t<e.length;t++){e[t]=$.extend(!0,{},this.params.targetDefaults,e[t]),e[t].originalCenter=e[t].center,e[t].element=this.canvas.createGroup(!1,{id:$(this.container).attr("id")+"Target_"+t,eleClass:"targetCanvas"}),e[t].rings=[];for(n=0;n<jat.Target.targets[e[t].name].numberRings;n++)e[t].rings[n]={},e[t].rings[n].element=this.canvas.createCircle({x:this.convertTo.canvas.x(e[t].center[0]),y:this.convertTo.canvas.y(e[t].center[1]),radius:this.convertTo.canvas.x(jat.Target.targets[e[t].name].diameters[n],e[t].diameter)/2,fill:jat.Target.targets[e[t].name].colors[n],stroke:jat.Target.targets[e[t].name].strokeColors[n],eleClass:n}),$(e[t].element).append(e[t].rings[n].element);this.rootGroup.appendChild(e[t].element),$(e[t].element).css({opacity:e[t].style.initial.opacity})}return e},jat.Target.prototype.calculateRing=function(e){var t,n={x:0,y:0,diagonal:0},r={x:(this.convertTo.canvas.x(this.target[e.target].center[0])+this.transX)*this.zoom,y:(this.convertTo.canvas.y(this.target[e.target].center[1])+this.transY)*this.zoom,radius:this.convertTo.canvas.x(this.target[e.target].diameter)/2*this.zoom,numberRings:jat.Target.targets[this.target[e.target].name].numberRings},i=jat.Target.targets[this.target[e.target].name];e.x>=r.x?n.x=r.x-e.x:n.x=e.x-r.x,e.y>=r.y?n.y=e.y-r.y:n.y=r.y-e.y,n.x===0&&n.y===0?n.diagonal=0:n.diagonal=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2));if(!(n.diagonal<=r.radius+1))return 0;for(t=r.numberRings-1;t>=0;t--)if(n.diagonal<=this.convertTo.canvas.x(i.diameters[t],this.target[e.target].diameter)/2*this.zoom+1)return i.rating[t]},jat.Target.prototype.getRing=function(e){var t,n;if(e)return this.calculateRing({x:this.convertTo.px.x(e.x,e.target),y:this.convertTo.px.y(e.y,e.target),target:e.target});for(t=0;t<this.arrow.length;t++)for(n=0;n<this.arrow[t].data.length;n++)this.arrow[t].data[n].ring=this.calculateRing({x:this.convertTo.px.x(this.arrow[t].data[n].x,this.arrow[t].data[n].target),y:this.convertTo.px.y(this.arrow[t].data[n].y,this.arrow[t].data[n].target),target:this.arrow[t].data[n].target});return this.arrow},jat.Target.prototype.getTargetParams=function(e){return jat.Target.targets[e]},jat.Target.prototype.removeArrowPointer=function(){this.canvas.canvas.removeChild(this.dragMark.element)},jat.Target.prototype.setArrowActive=function(e){var t=this,n,r={active:!0},i=function(e,n){t.arrow[e].active=n,n?t.arrow[e].element.setAttribute("class","arrowSetCanvas"):t.arrow[e].element.setAttribute("class","arrowSetCanvas hidden")},s=function(e,n,r){var i=t.arrow[e].data[n].element;r?i.setAttribute("class","arrowSetCanvas"):i.setAttribute("class",$(i).attr("class").substr(0,$(i).attr("class").indexOf(" "))+" hidden")};e=$.extend({},r,e);if(e.arrowsetID instanceof Array)if(e.active instanceof Array)for(n=0;n<e.arrowsetID.length;n++)i(e.arrowsetID[n],e.active[n]);else for(n=0;n<e.arrowsetID.length;n++)i(e.arrowsetID[n],e.active);else if(typeof e.arrowID!="undefined")if(e.arrowID instanceof Array)if(e.active instanceof Array)for(n=0;n<e.arrowID.length;n++)s(e.arrowsetID,e.arrowID[n],e.active[n]);else for(n=0;n<e.arrowID.length;n++)s(e.arrowsetID,e.arrowID[n],e.active);else s(e.arrowsetID,e.arrowID,e.active);else i(e.arrowsetID,e.active)},jat.Target.prototype.setArrowDrag=function(e){this.dragMark.rect.setPosition({x:e.x-e.drag.width/2,y:e.y-e.drag.height-e.arrowRadius}),this.dragMark.circle.setPosition({x:e.x,y:e.y-e.drag.height-e.arrowRadius})},jat.Target.prototype.setArrowPosition=function(e){var t,n,r=this,i={},s=function(e,t){r.arrow[e].data[t].element.setPosition({x:r.convertTo.px.x(r.arrow[e].data[t].x,r.arrow[e].data[t].target),y:r.convertTo.px.y(r.arrow[e].data[t].y,r.arrow[e].data[t].target)})};if(typeof e=="undefined")for(t=0;t<r.arrow.length;t++)for(n=0;n<r.arrow[t].data.length;n++)s(t,n);else{e=$.extend({},i,e);if(e.arrowsetID instanceof Array)for(t=0;t<e.arrowsetID.length;t++)for(n=0;n<r.arrow[e.arrowsetID[t]].data.length;n++)s(e.arrowsetID[t],n);else if(typeof e.arrowID!="undefined")if(e.arrowID instanceof Array)for(t=0;t<e.arrowID.length;t++)s(e.arrowsetID,e.arrowID[t]);else s(e.arrowsetID,e.arrowID);else{s(e.arrowsetID,e.active);for(t=0;t<r.arrow[e.arrowsetID].data.length;t++)s(e.arrowsetID,t)}}},jat.Target.prototype.setArrowOptions=function(e){var t=this,n;if(e.arrowsetID instanceof Array)for(n=0;n<e.arrowsetID.length;n++)$.extend(t.arrow[e.arrowsetID[n]],e.options);else $.extend(t.arrow[e.arrowsetID],e.options)},jat.Target.prototype.setBackgroundColor=function(e){this.backgroundColor=e,this.container.css({backgroundColor:e})},jat.Target.prototype.setGap=function(){var e;this.gap=[];for(e=0;e<this.target.length;e++)this.gap[e]={top:this.convertTo.canvas.y(this.target[e].center[1])-this.convertTo.canvas.x(this.target[e].diameter/2),left:this.convertTo.canvas.x(this.target[e].center[0]-this.target[e].diameter/2)}},jat.Target.prototype.setSize=function(){this.width=this.container.width(),this.height=this.container.height()?this.container.height():this.container.width()},jat.Target.prototype.setArrowStyle=function(e){var t=this,n,r,i={style:this.params.arrowDefaults.style.initial},s=function(e,n){var i;for(r=0;r<t.arrow[e].data.length;r++)i=t.arrow[e].data[r],i.element.setStyle({stroke:n.stroke,radius:n.radius,fill:n.fill}),$(i.element).css({opacity:n.opacity})},o=function(e,n,r){var i=t.arrow[e].data[n];i.element.setStyle({stroke:r.stroke,radius:r.radius,fill:r.fill}),$(i.element).css({opacity:r.opacity})};e=$.extend({},i,e);if(e.arrowsetID instanceof Array)if(e.style instanceof Array)for(n=0;n<e.arrowsetID.length;n++)s(e.arrowsetID[n],e.style[n]);else for(n=0;n<e.arrowsetID.length;n++)s(e.arrowsetID[n],e.style);else if(typeof e.arrowID!="undefined")if(e.arrowID instanceof Array)if(e.style instanceof Array)for(n=0;n<e.arrowID.length;n++)o(e.arrowsetID,e.arrowID[n],e.style[n]);else for(n=0;n<e.arrowID.length;n++)o(e.arrowsetID,e.arrowID[n],e.style);else o(e.arrowsetID,e.arrowID,e.style);else s(e.arrowsetID,e.style)},jat.Target.prototype.setTargetStyle=function(e,t){var n;switch(e){case"initial":for(n=0;n<this.target.length;n++)$(this.target[n].element).css({opacity:this.target[n].style.initial.opacity});break;case"arrow":for(n=0;n<this.target.length;n++)n===t.active?$(this.target[n].element).css({opacity:this.target[n].style.arrowOn.opacity}):$(this.target[n].element).css({opacity:this.target[n].style.arrowOff.opacity})}},jat.Target.prototype.setZoom=function(e){this.container.trigger("zoom.jArcherTarget",[e,this.zoom]),this.zoom=e,this.applyTransform()},jat.VectorCanvas=function(e,t){this.mode=window.SVGAngle?"svg":"vml";if(this.mode==="svg")this.createSvgNode=function(e){return document.createElementNS(this.svgns,e)};else{try{document.namespaces.rvml||document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),this.createVmlNode=function(e){return document.createElement("<rvml:"+e+' class="rvml">')}}catch(n){this.createVmlNode=function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)")}this.mode==="svg"?this.canvas=this.createSvgNode("svg"):(this.canvas=this.createVmlNode("group"),this.canvas.style.position="absolute"),this.setSize(e,t)},jat.VectorCanvas.prototype={svgns:"http://www.w3.org/2000/svg",mode:"svg",width:0,height:0,canvas:null,setSize:function(e,t){var n,r,i;if(this.mode==="svg")this.canvas.setAttribute("width",e),this.canvas.setAttribute("height",t);else{this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.coordsize=e+" "+t,this.canvas.coordorigin="0 0";if(this.rootGroup){i=this.rootGroup.getElementsByTagName("shape");for(n=0,r=i.length;n<r;n++)i[n].coordsize=e+" "+t,i[n].style.width=e+"px",i[n].style.height=t+"px";this.rootGroup.coordsize=e+" "+t,this.rootGroup.style.width=e+"px",this.rootGroup.style.height=t+"px"}}this.width=e,this.height=t},createCircle:function(e){var t;return this.mode==="svg"?(t=this.createSvgNode("circle"),t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("r",e.radius),t.setAttribute("fill",e.fill),t.setAttribute("stroke",e.stroke),t.setAttribute("class",e.eleClass),t.setPosition=function(e){t.setAttribute("cx",e.x),t.setAttribute("cy",e.y)},t.setStyle=function(e){t.setAttribute("r",e.radius),t.setAttribute("fill",e.fill),t.setAttribute("stroke",e.stroke)}):(t=this.createVmlNode("oval"),t.style.width=e.radius*2+"px",t.style.height=e.radius*2+"px",t.style.left=e.x-e.radius+"px",t.style.top=e.y-e.radius+"px",t.fillcolor=e.fill,$(t).addClass("config.eleClass"),t.stroke=!0,t.strokecolor=e.stroke,t.setPosition=function(n){t.style.left=n.x-e.radius+"px",t.style.top=n.y-e.radius+"px"},t.setStyle=function(e){t.style.width=e.radius*2+"px",t.style.height=e.radius*2+"px",t.fillcolor=e.fill,t.stroke=!0,t.strokecolor=e.stroke}),t},createRect:function(e){var t;return this.mode==="svg"?(t=this.createSvgNode("rect"),t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("width",e.width),t.setAttribute("height",e.height),t.setAttribute("fill",e.fill),t.setPosition=function(e){t.setAttribute("x",e.x),t.setAttribute("y",e.y)}):(t=this.createVmlNode("rect"),t.style.width=e.width+"px",t.style.height=e.width+"px",t.style.left=e.x+"px",t.style.top=e.y+"px",t.fillcolor=e.fill,t.setPosition=function(e){t.style.left=e.x+"px",t.style.top=e.y+"px"}),t},createGroup:function(e,t){var n;return t=t||{},this.mode==="svg"?(n=this.createSvgNode("g"),t.id&&(n.id=t.id),t.eleClass&&n.setAttribute("class",t.eleClass)):(n=this.createVmlNode("group"),n.style.width=this.width+"px",n.style.height=this.height+"px",n.style.left="0px",n.style.top="0px",n.coordorigin="0 0",t.id&&(n.id=t.id),t.eleClass&&$(n).addClass("config.eleClass"),n.coordsize=this.width+" "+this.height),e&&(this.rootGroup=n),n},applyTransformParams:function(e,t,n){this.mode==="svg"?this.rootGroup.setAttribute("transform","scale("+e+") translate("+t+", "+n+")"):(this.rootGroup.coordorigin=this.width-t-this.width/100+","+(this.height-n-this.height/100),this.rootGroup.coordsize=this.width/e+","+this.height/e)}};