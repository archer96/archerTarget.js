/*! archerTarget.js | v0.3.8 | https://github.com/archer96/archerTarget.js | (c) 2014 Andre Meyering | Licensed MIT */

!function(a,b,c){"use strict";function d(){var b,c=0,d=["ms","moz","webkit","o"];for(b=0;b<d.length&&!a.requestAnimationFrame;b++)a.requestAnimationFrame=a[d[b]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d[b]+"CancelAnimationFrame"]||a[d[b]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-c)),f=a.setTimeout(function(){b(d+e)},e);return c=d+e,f}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}function e(a,b,c){for(var d=0,e=a.length;e>d;d++)a[d].addEventListener(b,c,!1)}function f(a){return"object"==typeof Node?a instanceof Node:a&&"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName}function g(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName}function h(a){return a&&"[object Function]"===Object.prototype.toString.call(a)}function i(a){return a&&"[object Array]"===Object.prototype.toString.call(a)}function j(a){return!(a instanceof Array||"number"==typeof a||"string"==typeof a||"boolean"==typeof a||f(a)||g(a)||h(a))}function k(a,b,c){for(var d=0,e=a.length;e>d;d++)a[d].removeEventListener(b,c,!1)}"undefined"==typeof a.DEVMODE&&(a.DEVMODE=0);var l={target:"wa_x",targetDefaults:{center:[50,50],diameter:90,style:{initial:{opacity:1},hover:{opacity:1},arrowOn:{opacity:1},arrowOff:{opacity:.8}}},arrows:{},arrowDefaults:{active:!0,draggable:!0,radius:5,style:{initial:{opacity:.9,color:"#00ff00",stroke:!1,strokeWidth:null},hover:{opacity:1},selected:{opacity:1}},target:0},backgroundColor:"transparent",draggable:!0,scale:1,maxScale:6,minScale:.6,scaleStep:.2,scalable:!0,zoomInButton:"+",zoomOutButton:"&#x2212;",transX:0,transY:0,arrowClass:"arrow",plugins:{},isTouch:null},m={onTargetMove:"targetMove",onTargetClick:"targetClick",onArrowOver:"arrowOver",onArrowOut:"arrowOut",onArrowMove:"arrowMove",onArrowSelect:"arrowSelect",onArrowDeselect:"arrowDeselect",onScale:"zoom",onContainerTap:"containerTap",onContainerMousedown:"containerMousedown"},n={};a.ArcherTarget=function(a,b){if("undefined"==typeof this)throw new Error('"this" is undefined. use "new ArcherTarget(...)"and NOT "ArcherTarget(...)"');var c=this;if(a.id||(a.id=ArcherTarget.GUID()),c._id=a.id,n[c._id])for(var d in m)m.hasOwnProperty(d)&&n[c._id].options[d]&&a.removeEventListener(m[d]+".archerTarget",n[c._id].options[d],!1);return n[c._id]=new o(a,b),c},ArcherTarget.addTarget=function(a,b){o.Targets[a]=b},ArcherTarget.addPlugin=function(a,b){o.Plugins[a]=b};var o=function(a,b){var c=this;c._id=a.id,c.options=ArcherTarget.extend(!0,{},l,b),c.container=a,c.eventListeners=[];for(var d in m)m.hasOwnProperty(d)&&b[d]&&a.addEventListener(m[d]+".archerTarget",b[d],!1);c.init()};o.Targets={},o.Plugins={},ArcherTarget.prototype.removeEventListeners=function(){var a=n[this._id];try{for(var b=0;b<a.eventListeners.length;b++)!!a.eventListeners&&a.eventListeners[b]();a.eventListeners=[]}catch(c){console.error("ArcherTarget.js :: removeEventListeners error ::",c)}},ArcherTarget.GUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},o.prototype.bindArrowEvents=function(){var b,c,d,f,g,h,i,j,l=this,m={},n={},o=ArcherTarget.offset(l.container).left,p=ArcherTarget.offset(l.container).top,q=l.options.isTouch,r=0;l.arrowMoving=!1,f=function(){if(!l.arrowMoving||!n.data.draggable)return!1;if(m.el.setPosition({x:c,y:d}),n.data.draggable instanceof Object&&l.setArrowPointer({x:c,y:d,drag:n.data.draggable,arrowRadius:n.data.radius}),m.ring=l.calculateRing({x:c,y:d-r,target:b}),m.x=l.convertTo.pcX(c,b),m.y=l.convertTo.pcY(d-r,b),!l.checkOnTarget(m)){var e=l.checkClosestTarget(b,{x:c,y:d});b!==e&&(m.target=b=e,l.setTargetStyle("arrow",{active:b}))}l.arrowList[n.id]=n.data,l.arrowList[n.id].data[m.id]=m,a.requestAnimationFrame(f),ArcherTarget.fireEvent(m.el,"arrowMove.archerTarget",{arrowset:n.id,arrow:m.id,arrows:l.arrowList})},g=function(a){if(!l.arrowMoving)return!1;if(q){var b=a.touches[0];c=b.pageX-o,d=b.pageY-p}else c=a.pageX-o,d=a.pageY-p;return!1},h=function(e){var g=e.target;if(o=ArcherTarget.offset(l.container).left,p=ArcherTarget.offset(l.container).top,!l.arrowMoving){var h,i=g.parentNode,j=g.className.baseVal;n.id=parseInt(i.id.substr(i.id.indexOf("_")+1),10),n.data=l.arrowList[n.id],b=n.data.target,h=-1===j.indexOf(" ")?parseInt(j,10):parseInt(j.substr(0,j.indexOf(" ")),10),m=n.data.data[h],m.el=g,m.id=h}if(q){var k=e.touches[0];k.noOffset?(c=k.pageX||l.convertTo.pxX(m.x||0,b),d=k.pageY||l.convertTo.pxY(m.y||0,b)):(c=k.pageX-o||l.convertTo.pxX(m.x||0,b),d=k.pageY-p||l.convertTo.pxY(m.y||0,b))}else{if("mousedown"!==e.type)return"mouseover"!==e.type||l.arrowMoving?!1:(m.el.setAttribute("fill",n.data.style.hover.color),m.el.style.opacity=n.data.style.hover.opacity,ArcherTarget.fireEvent(m.el,"arrowOver.archerTarget",{arrowset:n.id,arrow:m.id,arrows:l.arrowList}),!1);c=e.pageX-o||l.convertTo.pxX(m.x,b),d=e.pageY-p||l.convertTo.pxY(m.y,b)}return l.arrowMoving=!0,n.data.draggable&&(l.setTargetStyle("arrow",{active:b}),q||(l.container.style.cursor="move")),m.el.setAttribute("fill",n.data.style.selected.color),m.el.style.opacity=n.data.style.selected.opacity,ArcherTarget.fireEvent(m.el,"arrowSelect.archerTarget",{arrowset:n.id,arrow:m.id,arrows:l.arrowList}),n.data.draggable instanceof Object&&n.data.draggable?(l.createArrowPointer({x:l.convertTo.pxX(m.x,b),y:l.convertTo.pxY(m.y,b),drag:n.data.draggable,color:n.data.style.selected.color,arrowRadius:n.data.radius}),r=n.data.draggable.height+n.data.radius):r=0,q&&1!==e.touches.length||!n.data.draggable||(a.cancelAnimationFrame(f),a.requestAnimationFrame(f)),!1},i=function(){return l.arrowMoving?(l.arrowMoving=!1,l.setTargetStyle("initial"),q?m.el.setAttribute("fill",n.data.style.initial.color):m.el.setAttribute("fill",n.data.style.hover.color),n.data.draggable instanceof Object&&(l.removeArrowPointer(),m.el.setPosition({x:l.convertTo.pxX(m.x,b),y:l.convertTo.pxY(m.y,b)})),q||(l.container.style.cursor="default"),ArcherTarget.fireEvent(l.container,"arrowDeselect.archerTarget",{arrowset:n.id,arrow:m.id,arrows:l.arrowList}),!1):!1},j=function(){return l.arrowMoving&&n.data.draggable||(m.el.setAttribute("fill",n.data.style.initial.color),m.el.style.opacity=n.data.style.initial.opacity,ArcherTarget.fireEvent(m.el,"arrowOut.archerTarget",{arrowset:n.id,arrow:m.id,arrows:l.arrowList})),!1},l.container.addEventListener(q?"touchmove":"mousemove",g),l.container.addEventListener(q?"touchend":"mouseup",i);var s=l.container.querySelectorAll(".arrowSetCanvas circle");e(s,q?"touchstart":"mousedown",h),q||(e(s,"mouseout",j),e(s,"mouseover",h)),l.eventListeners.push(function(){l.container.removeEventListener(q?"touchmove":"mousemove",g),l.container.removeEventListener(q?"touchend":"mouseup",i),k(s,q?"touchstart":"mousedown",h),q||(k(s,"mouseout",j),k(s,"mouseover",h))})},o.prototype.bindContainerEvents=function(){var b=this,c=!1,d=b.options.isTouch;if(this.options.draggable){var e,f,g,h,i,j,k,l,m=!1,n=this.container.getElementsByTagName("svg")[0];i=function(){m&&(b.transX=(g-e)/b.scale,b.transY=(h-f)/b.scale,c=!0,b.setTransform(),a.requestAnimationFrame(i),ArcherTarget.fireEvent(b.container,"targetMove.archerTarget"))},j=function(a){if(m&&!b.arrowMoving)if(d){var c=a.touches[0];g=c.pageX,h=c.pageY}else g=a.pageX,h=a.pageY},k=function(j){if(!b.arrowMoving){var k=d?j.touches[0]:j;e=k.pageX-b.transX*b.scale,f=k.pageY-b.transY*b.scale,g=k.pageX,h=k.pageY,m=!0,c=!1,d||(n.style.cursor="move"),a.cancelAnimationFrame(i),a.requestAnimationFrame(i)}},l=function(){b.arrowMoving||(m=c=!1,d||(n.style.cursor="default"))};var o=b.canvas.rootGroup;o.addEventListener(d?"touchstart":"mousedown",k),o.addEventListener(d?"touchmove":"mousemove",j),o.addEventListener(d?"touchend":"mouseup",l),b.eventListeners.push(function(){o.removeEventListener(d?"touchstart":"mousedown",k),o.removeEventListener(d?"touchmove":"mousemove",j),o.removeEventListener(d?"touchend":"mouseup",l)})}var p=function(a){if(!b.arrowMoving){{var e="undefined"!=typeof a.target.className.baseVal?a.target.className.baseVal:a.target.className;a.target}if(!c&&null===e.match(/archerTarget-zoomin/g)&&null===e.match(/archerTarget-zoomout/g)){var f,g,h,i,j=ArcherTarget.offset(b.container).left,k=ArcherTarget.offset(b.container).top,l=d?"touchstart"===a.type?event.touches[0]:event.changedTouches[0]:a;f=l.pageX-j,g=l.pageY-k,h=b.checkClosestTarget(0,{x:f,y:g}),i=[{x:f/b.width*100,y:g/b.height*100,xPx:f,yPx:g},{x:b.convertTo.pcX(f,h),y:b.convertTo.pcY(g,h),target:h},a],"touchstart"===a.type||"mousedown"===a.type?ArcherTarget.fireEvent(b.container,"containerMousedown.archerTarget",{canvasCoords:i[0],targetCoords:i[1],touches:a.touches}):ArcherTarget.fireEvent(b.container,"containerTap.archerTarget",{canvasCoords:i[0],targetCoords:i[1],touches:a.touches})}}};b.container.addEventListener(d?"touchstart":"mousedown",p),b.container.addEventListener(d?"touchend":"click",p),b.eventListeners.push(function(){b.container.removeEventListener(d?"touchstart":"mousedown",p),b.container.removeEventListener(d?"touchend":"click",p)})},o.prototype.bindTargetEvents=function(){function a(a,d){var e=function(){ArcherTarget.fireEvent(d.el,"targetClick.archerTarget",{index:a})},f=d.el.parentNode;f.addEventListener(c?"touchend":"click",e),b.eventListeners.push(function(){f.removeEventListener(c?"touchend":"click",e)})}for(var b=this,c=b.options.isTouch,d=0;d<b.targetList.length;d++)a(d,b.targetList[d])},o.prototype.bindZoomEvents=function(){function a(){c.scale<=c.options.maxScale&&(d=c.scale+c.options.scaleStep),c.setScale(d)}function b(){c.scale>=c.options.minScale+c.options.scaleStep&&(d=c.scale-c.options.scaleStep),c.setScale(d)}var c=this,d=0,e=this.container;e.querySelector(".archerTarget-zoomin").addEventListener("click",a),e.querySelector(".archerTarget-zoomout").addEventListener("click",b),c.eventListeners.push(function(){e.querySelector(".archerTarget-zoomin").removeEventListener("click",a),e.querySelector(".archerTarget-zoomout").removeEventListener("click",b)})},o.prototype.calculateRing=function(a){var b,c,d=this,e=d.targetList[a.target],f=o.Targets[e.name],g={x:0,y:0,diagonal:0},h={x:(d.convertTo.canvasX(e.center[0])+d.transX)*d.scale,y:(d.convertTo.canvasY(e.center[1])+d.transY)*d.scale,radius:d.convertTo.canvasX(e.diameter)/2*d.scale,numberRings:f.numberRings};if(g.x=a.x>=h.x?h.x-a.x:a.x-h.x,g.y=a.y>=h.y?a.y-h.y:h.y-a.y,g.diagonal=0===g.x&&0===g.y?0:Math.sqrt(Math.pow(g.x,2)+Math.pow(g.y,2)),g.diagonal>h.radius+1)return 0;for(b=h.numberRings-1;b>=0;b--)if(c=d.convertTo.canvasX(f.diameters[b],e.diameter)/2*d.scale+1,g.diagonal<=c)return f.rating[b]},o.prototype.checkClosestTarget=function(a,b){var c,d,e,f,g,h=this,i=h.targetList.length;for(c=0;i>c;c++)if(g=h.targetList[c],d=(h.convertTo.canvasX(g.center[0])+h.transX)*h.scale,e=(h.convertTo.canvasY(g.center[1])+h.transY)*h.scale,f=h.convertTo.canvasX(g.diameter)/2*h.scale,b.x>d-f&&b.x<d+f&&b.y>e-f&&b.y<e+f)return c;return a},o.prototype.checkOnTarget=function(a,b){if(this.targetList.length<=1)return!0;var c=b&&b.tolerance?b:{tolerance:5};return a.x>100+c.tolerance||a.y>100+c.tolerance||a.x<-c.tolerance||a.y<-c.tolerance?!1:!0},o.prototype.createArrowPointer=function(a){var b=this;b.dragMark={},b.dragMark.el=b.canvas.createGroup({id:b.$containerId+"ArrowDrag"}),b.dragMark.rect=b.canvas.createRect({x:a.x-a.drag.width/2,y:a.y-a.drag.height-a.arrowRadius,width:a.drag.width,height:a.drag.height,fill:a.color}),b.dragMark.el.appendChild(b.dragMark.rect),b.dragMark.circle=b.canvas.createCircle({x:a.x,y:a.y-a.drag.height-a.arrowRadius,radius:a.drag.width,fill:a.color,stroke:!1,eleClass:!1}),b.dragMark.el.appendChild(b.dragMark.circle),b.canvas.canvas.appendChild(b.dragMark.el)},o.prototype.createArrows=function(a){a||(a=[]);var b,c,d,e,f,g,h=this,i={height:40,width:5},j=a.length;for(h.arrowGroup=h.canvas.createGroup({id:h._id+"ArrowGroup"}),b=0;j>b;b++){for(a[b]=e instanceof Array?{data:a[b]}:a[b],a[b]=ArcherTarget.extend(!0,{},h.options.arrowDefaults,a[b]),e=a[b],e.draggable instanceof Object&&(e.draggable=ArcherTarget.extend(!0,{},i,e.draggable)),e.el=h.canvas.createGroup({id:h._id+"ArrowSet_"+b,eleClass:"arrowSetCanvas"}),f=e.data.length,c=0;f>c;c++)g=e.data[c],h.targetList[e.target]||(e.target=0),g.target=g.target||e.target,h.targetList[g.target]||(g.target=0),"undefined"==typeof g.active&&(g.active=e.active),isFinite(g.x)&&isFinite(g.y)||(g.active=!1,g.x=g.y=0),d=g.active?"":" hidden",g.el=h.canvas.createCircle({x:h.convertTo.pxX(g.x,g.target),y:h.convertTo.pxY(g.y,g.target),radius:e.radius,fill:e.style.initial.color,stroke:e.style.initial.stroke,strokeWidth:e.style.initial.strokeWidth,eleClass:c+d}),g.el.style.opacity=e.style.initial.opacity,e.el.appendChild(g.el);h.arrowGroup.appendChild(e.el)}return h.canvas.canvas.appendChild(h.arrowGroup),a},o.prototype.createTarget=function(a){var b,c,d,e,f=this;for(a=a||[],b=0;b<a.length;b++){for(a[b]=ArcherTarget.extend(!0,{},this.options.targetDefaults,a[b]),d=a[b],d.originalCenter=d.center,d.el=this.canvas.createGroup({id:f._id+"Target_"+b,eleClass:"targetCanvas"}),d.rings=[],c=0;c<o.Targets[d.name].numberRings;c++)d.rings[c]={},e=o.Targets[d.name].diameters[c],d.rings[c].el=this.canvas.createCircle({x:f.convertTo.canvasX(d.center[0]),y:f.convertTo.canvasY(d.center[1]),radius:f.convertTo.canvasX(e,d.diameter)/2,fill:o.Targets[d.name].colors[c],stroke:o.Targets[d.name].strokeColors[c],strokeWidth:o.Targets[d.name].strokeWidths?o.Targets[d.name].strokeWidths[c]:.7,eleClass:c}),d.el.appendChild(d.rings[c].el);d.el.style.opacity=d.style.initial.opacity,this.targetGroup.appendChild(d.el)}return a},ArcherTarget.extend=function(){var a,b,d,e,f,g,k=arguments[0]||{},l=1,m=arguments.length,n=!1;for("boolean"==typeof k&&(n=k,k=arguments[1]||{},l=2),"object"!=typeof k&&h(k)&&(k={}),m===l&&(k=this,--l);m>l;l++)if(null!==(f=arguments[l]))for(e in f)if(f.hasOwnProperty(e)){if(a=k[e],d=f[e],k===d)continue;n&&d&&(j(d)||(b=i(d)))?(b?(b=!1,g=a&&i(a)?a:[]):g=a&&j(a)?a:{},k[e]=ArcherTarget.extend(n,g,d)):d!==c&&(k[e]=d)}return k},ArcherTarget.fireEvent=function(a,c,d){var e=b.createEvent("Event");if(e.initEvent(c,!0,!0),d)for(var f in d)d.hasOwnProperty(f)&&(e[f]=d[f]);a.dispatchEvent(e)},ArcherTarget.prototype.get=o.prototype.get=function(a){var b=n[this._id],c={arrows:function(){return b.getArrows()},targetParams:function(a){return p(a)},transform:function(){return b.getTransform()},ring:function(a){return b.getRing(a)},pluginData:function(a){return b.getPluginData(a)}};return a&&c[a]?arguments[1]?c[a].apply(null,Array.prototype.slice.call(arguments,1)):c[a]():void 0},o.prototype.getArrows=function(){return this.arrowList},o.prototype.getRing=function(a){var b=this;if(a)return b.calculateRing({x:b.convertTo.pxX(a.x,a.target),y:b.convertTo.pxY(a.y,a.target),target:a.target||0});var c,d,e;for(c=0;c<b.arrowList.length;c++)for(d=0;d<b.arrowList[c].data.length;d++)e=b.arrowList[c].data[d],e.ring=b.calculateRing({x:b.convertTo.pxX(e.x,e.target),y:b.convertTo.pxY(e.y,e.target),target:e.target});return b.arrowList},o.prototype.getSize=function(){var b=a.getComputedStyle(this.container,null);if(this.width=b.width,this.height=b.height||this.width,this.width.indexOf("px")>=0){var c=this.width;this.width=c.substr(0,c.length-2)}if(this.height.indexOf("px")>=0){var d=this.height;this.height=d.substr(0,d.length-2)}},o.prototype.getTransform=function(){return{x:this.transX,y:this.transY,scale:this.scale}};var p=ArcherTarget.getTarget=function(a){return o.Targets[a]||{}};o.prototype.getPluginData=function(a){return o.Plugins[a].getPluginData(this)},o.prototype.init=function(){var a=this;if(a.isTouch(),a.container.className+=" archerTargetContainer",a.container.style.overflow="hidden",a.container.style.position="relative",a.transX=a.options.transX,a.transY=a.options.transY,a.scale=a.options.scale,a.pluginList=a.options.plugins,a.mergeStyles(),a.setBackgroundColor(a.options.backgroundColor),a.initConverter(),d(),a.getSize(),a.canvas=new q(a.width,a.height),a.container.appendChild(a.canvas.canvas),a.targetGroup=a.canvas.createGroup({id:a._id+"TargetGroup"},!0),a.canvas.canvas.appendChild(a.targetGroup),a.targetList=a.createTarget(a.options.target instanceof Array?a.options.target:[{name:a.options.target}]),a.setGap(),this.arrowList=a.createArrows(a.options.arrows),a.bindArrowEvents(),a.bindContainerEvents(),a.bindTargetEvents(),a.options.scalable){var c=b.createElement("div"),e=b.createElement("div");c.className="archerTarget-zoomin",e.className="archerTarget-zoomout",c.innerHTML=a.options.zoomInButton,e.innerHTML=a.options.zoomOutButton,a.container.appendChild(c),a.container.appendChild(e),a.bindZoomEvents()}a.setTransform(),a.initPlugins()},o.prototype.initConverter=function(){var a=this,b={x:{},y:{}};a.convertTo={pcX:function(b,c){return c||(c=0),(b/a.scale-a.gap[c].left-a.transX)/a.convertTo.canvasX(a.targetList[c].diameter)*100},pcY:function(b,c){return c||(c=0),(b/a.scale-a.gap[c].top-a.transY)/a.convertTo.canvasX(a.targetList[c].diameter)*100},pxX:function(b,c){return c||(c=0),(a.convertTo.canvasX(a.targetList[c].diameter)/100*b+a.gap[c].left+a.transX)*a.scale},pxY:function(b,c){return c||(c=0),(a.convertTo.canvasX(a.targetList[c].diameter)/100*b+a.gap[c].top+a.transY)*a.scale},canvasX:function(c,d){d||(d=100),b.x[d]||(b.x[d]={});var e=b.x[d];return e[c]||(e[c]=a.width/100*d/100*c),e[c]},canvasY:function(c,d){d||(d=100),b.y[d]||(b.y[d]={});var e=b.y[d];return e[c]||(e[c]=a.height/100*d/100*c),e[c]}}},o.prototype.initPlugins=function(){var a;for(a in this.pluginList)this.pluginList.hasOwnProperty(a)&&o.Plugins[a]&&o.Plugins[a].initialize(this,this.pluginList[a])},o.prototype.isTouch=function(){var c=this;return null!==c.options.isTouch?c.options.isTouch:(c.options.isTouch="ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch||!1,c.options.isTouch)},o.prototype.mergeStyles=function(){var a,b=this,c=this.options;for(a in c.targetDefaults.style)c.targetDefaults.style.hasOwnProperty(a)&&(b.options.targetDefaults.style[a]=ArcherTarget.extend(!0,{},c.targetDefaults.style.initial,c.targetDefaults.style[a]));for(a in c.arrowDefaults.style)c.arrowDefaults.style.hasOwnProperty(a)&&(b.options.arrowDefaults.style[a]=ArcherTarget.extend(!0,{},c.arrowDefaults.style.initial,c.arrowDefaults.style[a]))},ArcherTarget.offset=function(b){if(0===b.length)return null;var c=b.getBoundingClientRect();return{left:c.left+a.pageXOffset,top:c.top+a.pageYOffset,width:Math.round(c.width),height:Math.round(c.height)}},o.prototype.removeArrowPointer=function(){this.canvas.canvas.removeChild(this.dragMark.el)},ArcherTarget.prototype.set=o.prototype.set=function(a){var b=n[this._id],c={arrowOptions:function(a){b.setArrowOptions(a)},arrowActive:function(a){b.setArrowActive(a)},arrowStyle:function(a){b.setArrowStyle(a)},transform:function(a,c,d){b.setTransform(a,c,d)},backgroundColor:function(a){b.setBackgroundColor(a)},scale:function(a){b.setScale(a)}};return a&&c[a]?arguments[1]?c[a].apply(null,Array.prototype.slice.call(arguments,1)):c[a]():void 0},o.prototype.setArrowActive=function(a){var b=this,c=function(a,c,d){"undefined"==typeof d?d=b.arrowList[a].data[c].active:b.arrowList[a].data[c].active=d;var e=b.arrowList[a].data[c].el,f=d?"":" hidden";e.setAttribute("class",c+f)},d=function(a,d){var e;"undefined"!=typeof d&&(b.arrowList[a].active=d);var f=b.arrowList[a].data.length;for(e=0;f>e;e++)c(a,e,d)};"undefined"!=typeof a.arrowID?c(a.arrowsetID,a.arrowID,a.active):d(a.arrowsetID,a.active)},o.prototype.setArrowOptions=function(a){var b,c,d,e=this;d={active:function(b){e[b]({arrowsetID:a.arrowsetID,active:a.options.active})}};for(b in a.options)a.options.hasOwnProperty(b)&&(c="setArrow"+b.charAt(0).toUpperCase()+b.substr(1),a.options[b]!==e.arrowList[a.arrowsetID][b]&&d[b]&&d[b](c));ArcherTarget.extend(!0,e.arrowList[a.arrowsetID],a.options)},o.prototype.setArrowPointer=function(a){this.dragMark.rect.setPosition({x:a.x-a.drag.width/2,y:a.y-a.drag.height-a.arrowRadius}),this.dragMark.circle.setPosition({x:a.x,y:a.y-a.drag.height-a.arrowRadius})},o.prototype.setArrowPosition=function(a){var b,c,d=this,e=d.convertTo.pxX,f=d.convertTo.pxY,g={},h=function(a,b){var c=d.arrowList[a].data[b];c.el.setPosition({x:e(c.x,c.target),y:f(c.y,c.target)})};if("undefined"==typeof a)for(b=0;b<d.arrowList.length;b++)for(c=0;c<d.arrowList[b].data.length;c++)h(b,c);else if(a=ArcherTarget.extend(!0,{},g,a),a.arrowsetID instanceof Array)for(b=0;b<a.arrowsetID.length;b++)for(c=0;c<d.arrowList[a.arrowsetID[b]].data.length;c++)h(a.arrowsetID[b],c);else if("undefined"!=typeof a.arrowID)if(a.arrowID instanceof Array)for(b=0;b<a.arrowID.length;b++)h(a.arrowsetID,a.arrowID[b]);else h(a.arrowsetID,a.arrowID);else for(h(a.arrowsetID,a.active),b=0;b<d.arrowList[a.arrowsetID].data.length;b++)h(a.arrowsetID,b)},o.prototype.setArrowStyle=function(a){var b,c,d=this,e={style:d.options.arrowDefaults.style.initial},f=function(a,b){var e;for(b.radius||(b.radius=d.arrowList[a].radius),c=0;c<d.arrowList[a].data.length;c++)e=d.arrowList[a].data[c],e.el.setStyle({stroke:b.stroke,strokeWidth:b.strokeWidth,radius:b.radius,fill:b.color}),e.el.opacity=b.opacity},g=function(a,b,c){var e=d.arrowList[a].data[b];c.radius||(c.radius=d.arrowList[a].radius),e.el.setStyle({stroke:c.stroke,strokeWidth:c.strokeWidth,radius:c.radius,fill:c.color}),e.el.style.opacity=c.opacity};if(a=ArcherTarget.extend(!0,{},e,a),a.arrowsetID instanceof Array)if(a.style instanceof Array)for(b=0;b<a.arrowsetID.length;b++)f(a.arrowsetID[b],a.style[b]);else for(b=0;b<a.arrowsetID.length;b++)f(a.arrowsetID[b],a.style);else if("undefined"!=typeof a.arrowID)if(a.arrowID instanceof Array)if(a.style instanceof Array)for(b=0;b<a.arrowID.length;b++)g(a.arrowsetID,a.arrowID[b],a.style[b]);else for(b=0;b<a.arrowID.length;b++)g(a.arrowsetID,a.arrowID[b],a.style);else g(a.arrowsetID,a.arrowID,a.style);else f(a.arrowsetID,a.style)},o.prototype.setBackgroundColor=function(a){this.backgroundColor=this.container.style.backgroundColor=a},o.prototype.setGap=function(){var a,b,c=this;for(c.gap=[],a=0;a<c.targetList.length;a++)b=c.targetList[a],c.gap[a]={top:c.convertTo.canvasY(b.center[1])-c.convertTo.canvasX(b.diameter/2),left:c.convertTo.canvasX(b.center[0]-b.diameter/2)}},o.prototype.setTargetStyle=function(a,b){var c,d,e=this.targetList;d={initial:function(){for(c=0;c<e.length;c++)e[c].el.style.opacity=e[c].style.initial.opacity},arrow:function(){var a;for(c=0;c<e.length;c++)a=c===b.active?"arrowOn":"arrowOff",e[c].el.style.opacity=e[c].style[a].opacity}},d[a]&&d[a]()},o.prototype.setTransform=function(a,b,c){a||0===a?this.transX=a:a=this.transX,b||0===b?this.transY=b:b=this.transY,c?this.scale=c:c=this.scale,this.canvas.applyTransformParams(c,a,b),this.setArrowPosition()},o.prototype.setScale=function(a){ArcherTarget.fireEvent(this.container,"zoom.archerTarget",{newScale:a,oldScale:this.scale}),this.scale=a,this.setTransform()};var q=function(c,d){a.SVGAngle||alert("No SVG supported!"),this.createSvgNode=function(a){return b.createElementNS("http://www.w3.org/2000/svg",a)},this.canvas=this.createSvgNode("svg"),this.setSize(c,d)};q.prototype={width:0,height:0,canvas:null,setSize:function(a,b){this.canvas.setAttribute("width",a),this.canvas.setAttribute("height",b),this.width=a,this.height=b},createCircle:function(a){var b=this.createSvgNode("circle");return b.setAttribute("cx",a.x),b.setAttribute("cy",a.y),b.setAttribute("r",a.radius),b.setAttribute("fill",a.fill),b.setAttribute("stroke",a.stroke),b.setAttribute("stroke-width",a.strokeWidth),b.setAttribute("class",a.eleClass),b.setPosition=function(a){b.setAttribute("cx",a.x),b.setAttribute("cy",a.y)},b.setStyle=function(a){b.setAttribute("r",a.radius),b.setAttribute("fill",a.fill),b.setAttribute("stroke",a.stroke),b.setAttribute("stroke-width",a.strokeWidth)},b},createRect:function(a){var b=this.createSvgNode("rect");return b.setAttribute("x",a.x),b.setAttribute("y",a.y),b.setAttribute("width",a.width),b.setAttribute("height",a.height),b.setAttribute("fill",a.fill),b.setPosition=function(a){b.setAttribute("x",a.x),b.setAttribute("y",a.y)},b},createGroup:function(a,b){var c=a||{},d=this.createSvgNode("g");return c.id&&(d.id=c.id),c.eleClass&&d.setAttribute("class",c.eleClass),b&&(this.rootGroup=d),d},applyTransformParams:function(a,b,c){this.rootGroup.setAttribute("transform","scale("+a+") translate("+b+", "+c+")")}}}(window,document);
//# sourceMappingURL=dist/archerTarget.min.map